<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InventroHub - Inventory Management System</title>
    <a href="login.html"></a>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Dashboard Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .stat-change {
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }

        /* Low Stock Card Special Styling */
        .low-stock-card {
            border-left-color: #e74c3c;
        }

        .low-stock-card:hover {
            border-left-color: #c0392b;
        }

        /* Category Filter */
        .category-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #e1e8ed;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #7f8c8d;
        }

        .category-btn.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border-color: #3498db;
        }

        .category-btn:hover {
            border-color: #3498db;
            color: #3498db;
        }

        .category-btn.active:hover {
            color: white;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .nav-tab {
            flex: 1;
            padding: 1rem;
            text-align: center;
            background: none;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #7f8c8d;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        /* Content Sections */
        .content-section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .content-section.active {
            display: block;
        }

        /* Product Management */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            font-weight: 600;
        }

        .search-bar {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input {
            padding: 0.8rem 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            min-width: 250px;
        }

        .search-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        /* Product Table */
        .table-container {
            overflow-x: auto;
            margin-top: 1rem;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .product-table th,
        .product-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .product-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }

        .product-table tr:hover {
            background: #f8f9fa;
        }

        .product-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            background: #e1e8ed;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stock-status {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .in-stock { background: #d4edda; color: #155724; }
        .low-stock { background: #fff3cd; color: #856404; }
        .out-of-stock { background: #f8d7da; color: #721c24; }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            color: #2c3e50;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #f8f9fa;
            color: #e74c3c;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
        }

        .form-select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }

        /* Cart */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid #e1e8ed;
            border-radius: 8px;
            margin-bottom: 1rem;
            background: #f8f9fa;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .cart-item-price {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0 1rem;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            background: #3498db;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-display {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
        }

        /* Bill */
        .bill-container {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .bill-header {
            text-align: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e1e8ed;
            padding-bottom: 1rem;
        }

        .bill-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .bill-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid #e1e8ed;
        }

        /* Low Stock Items List */
        .low-stock-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 0.5rem;
        }

        .low-stock-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: #fff3cd;
            border-radius: 6px;
            border-left: 3px solid #f39c12;
        }

        .low-stock-item-name {
            font-weight: 600;
            color: #856404;
            font-size: 0.9rem;
        }

        .low-stock-item-stock {
            font-weight: bold;
            color: #e74c3c;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .section-header {
                flex-direction: column;
                align-items: stretch;
            }

            .search-bar {
                flex-direction: column;
            }

            .search-input {
                min-width: 100%;
            }

            .product-table {
                font-size: 0.9rem;
            }

            .product-table th,
            .product-table td {
                padding: 0.5rem;
            }

            .category-filter {
                justify-content: center;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">InventroHub</div>
            <div class="user-info">
                <span>Welcome</span>
                <div class="user-avatar">A</div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Dashboard Stats -->
        <div class="stats-grid fade-in">
            <div class="stat-card">
                <h3>Total Products</h3>
                <div class="stat-value" id="totalProducts">0</div>
            </div>
            <div class="stat-card">
                <h3>Total Value</h3>
                <div class="stat-value" id="totalValue">‚Çπ0</div>
            </div>
            <div class="stat-card low-stock-card" onclick="showLowStockModal()">
                <h3>Low Stock Items</h3>
                <div class="stat-value" id="lowStockItems">0</div>
                <div class="stat-change negative">Click to view details</div>
                <div class="low-stock-list" id="lowStockPreview">
                    <!-- Low stock items preview will be shown here -->
                </div>
            </div>
            <div class="stat-card">
                <h3>Today's Sales</h3>
                <div class="stat-value" id="todaySales">‚Çπ0</div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs fade-in">
            <button class="nav-tab active" onclick="showSection('products')">Products Details</button>
            <button class="nav-tab" onclick="showSection('purchase')">Available products</button>
            <button class="nav-tab" onclick="showSection('bills')">Bills</button>
        </div>

        <!-- Products Section -->
        <div id="products" class="content-section active fade-in">
            <div class="section-header">
                <h2 class="section-title">Product Management</h2>
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search products..." id="searchInput">
                    <button class="btn btn-primary" onclick="openAddProductModal()">+ Add Product</button>
                </div>
            </div>

            <!-- Category Filter -->
            <div class="category-filter">
                <button class="category-btn active" onclick="filterByCategory('all')">All Categories</button>
                <button class="category-btn" onclick="filterByCategory('Spices and Masala')">üå∂Ô∏è Spices & Masala</button>
                <button class="category-btn" onclick="filterByCategory('Grains and Staples')">üåæ Grains & Staples</button>
                <button class="category-btn" onclick="filterByCategory('Oils and Ghee')">üõ¢Ô∏è Oils & Ghee</button>
                <button class="category-btn" onclick="filterByCategory('Household and Cleaning Items')">üßΩ Household & Cleaning</button>
                <button class="category-btn" onclick="filterByCategory('Snacks and Packaged Foods')">üçø Snacks & Packaged</button>
                <button class="category-btn" onclick="filterByCategory('Dairy Products')">ü•õ Dairy Products</button>
                <button class="category-btn" onclick="filterByCategory('Beverages')">ü•§ Beverages</button>
            </div>

            <div class="table-container">
                <table class="product-table">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="productTableBody">
                        <!-- Products will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Purchase Section -->
        <div id="purchase" class="content-section">
            <div class="section-header">
                <h2 class="section-title">Purchase Products</h2>
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search products to buy..." id="purchaseSearchInput">
                    <button class="btn btn-success" onclick="generateBill()" id="generateBillBtn">Generate Bill (0)</button>
                </div>
            </div>

            <!-- Category Filter for Purchase -->
            <div class="category-filter">
                <button class="category-btn active" onclick="filterPurchaseByCategory('all')">All Categories</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Spices and Masala')">üå∂Ô∏è Spices & Masala</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Grains and Staples')">üåæ Grains & Staples</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Oils and Ghee')">üõ¢Ô∏è Oils & Ghee</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Household and Cleaning Items')">üßΩ Household & Cleaning</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Snacks and Packaged Foods')">üçø Snacks & Packaged</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Dairy Products')">ü•õ Dairy Products</button>
                <button class="category-btn" onclick="filterPurchaseByCategory('Beverages')">ü•§ Beverages</button>
            </div>

            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
                <div>
                    <h3 style="margin-bottom: 1rem; color: #2c3e50;">Available Products</h3>
                    <div class="table-container">
                        <table class="product-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="purchaseProductTableBody">
                                <!-- Purchase products will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div>
                    <h3 style="margin-bottom: 1rem; color: #2c3e50;">Shopping Cart</h3>
                    <div id="cartItems">
                        <p style="text-align: center; color: #7f8c8d; padding: 2rem;">Cart is empty</p>
                    </div>
                    <div id="cartTotal" style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; display: none;">
                        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem;">
                            <span>Total: </span>
                            <span id="cartTotalAmount">‚Çπ0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bills Section -->
        <div id="bills" class="content-section">
            <div class="section-header">
                <h2 class="section-title">Generated Bills</h2>
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search bills..." id="billSearchInput">
                </div>
            </div>

            <div id="billsList">
                <p style="text-align: center; color: #7f8c8d; padding: 2rem;">No bills generated yet</p>
            </div>
        </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Add Product</h3>
                <button class="close-btn" onclick="closeProductModal()">&times;</button>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" class="form-input" id="productName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="productCategory" required>
                        <option value="">Select Category</option>
                        <option value="Spices and Masala">Spices and Masala</option>
                        <option value="Grains and Staples">Grains and Staples</option>
                        <option value="Oils and Ghee">Oils and Ghee</option>
                        <option value="Household and Cleaning Items">Household and Cleaning Items</option>
                        <option value="Snacks and Packaged Foods">Snacks and Packaged Foods</option>
                        <option value="Dairy Products">Dairy Products</option>
                        <option value="Beverages">Beverages</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Price (‚Çπ)</label>
                    <input type="number" class="form-input" id="productPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Stock Quantity</label>
                    <input type="number" class="form-input" id="productStock" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <input type="text" class="form-input" id="productDescription">
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <button type="button" class="btn btn-danger" onclick="closeProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-success" id="saveProductBtn">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Low Stock Modal -->
    <div id="lowStockModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">Low Stock Items</h3>
                <button class="close-btn" onclick="closeLowStockModal()">&times;</button>
            </div>
            <div id="lowStockContent">
                <!-- Low stock content will be populated here -->
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="closeLowStockModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Bill Modal -->
    <div id="billModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">Bill Details</h3>
                <button class="close-btn" onclick="closeBillModal()">&times;</button>
            </div>
            <div id="billContent">
                <!-- Bill content will be populated here -->
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="printBill()">Print Bill</button>
                <button class="btn btn-danger" onclick="closeBillModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let products = [];
        let cart = [];
        let bills = [];
        let editingProductId = null;
        let currentCategoryFilter = 'all';
        let currentPurchaseCategoryFilter = 'all';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadSampleData();
            renderProducts();
            renderPurchaseProducts();
            updateStats();
            setupEventListeners();
        });

        // Load sample data with new categories
        function loadSampleData() {
            products = [
                // Spices and Masala
                { id: 1, name: 'Turmeric Powder', category: 'Spices and Masala', price: 40, stock: 20},
                { id: 2, name: 'Red Chili Powder', category: 'Spices and Masala', price: 60, stock: 30},
                { id: 3, name: 'Garam Masala', category: 'Spices and Masala', price: 80, stock: 25},
                { id: 4, name: 'Cumin Seeds', category: 'Spices and Masala', price: 120, stock: 40},
                { id: 5, name: 'Coriander Powder', category: 'Spices and Masala', price: 50, stock: 40},
                { id: 6, name: 'Mustard seeds', category: 'Spices and Masala', price: 70, stock: 40},
                
                // Grains and Staples
                { id: 7, name: 'Basmati Rice', category: 'Grains and Staples', price: 180, stock: 100},
                { id: 8, name: 'Wheat Flour', category: 'Grains and Staples', price: 45, stock: 80},
                { id: 9, name: 'Toor Dal', category: 'Grains and Staples', price: 120, stock: 60 },
                { id: 10, name: 'Chana Dal', category: 'Grains and Staples', price: 90, stock: 45},
                { id: 11, name: 'Moong Dal', category: 'Grains and Staples', price: 80, stock: 45},
                { id: 12, name: 'Sugar', category: 'Grains and Staples', price: 50, stock: 45 },
                { id: 13, name: 'Salt', category: 'Grains and Staples', price: 40, stock: 45 },
                
                // Oils and Ghee
                { id: 14, name: 'Sunflower Oil', category: 'Oils and Ghee', price: 140, stock: 35 },
                { id: 15, name: 'Mustard Oil', category: 'Oils and Ghee', price: 160, stock: 25 },
                { id: 16, name: 'Pure Ghee', category: 'Oils and Ghee', price: 450, stock: 20 },
                { id: 17, name: 'Coconut oil', category: 'Oils and Ghee', price: 400, stock: 20 },
                
                // Household and Cleaning Items
                { id: 18, name: 'Dish Soap', category: 'Household and Cleaning Items', price: 30, stock: 40 },
                { id: 19, name: 'Colgate', category: 'Household and Cleaning Items', price: 50, stock: 30 },
                { id: 20, name: 'Floor Cleaner', category: 'Household and Cleaning Items', price: 95, stock: 25 },
                { id: 21, name: 'surf Excel', category: 'Household and Cleaning Items', price: 80, stock: 35 },
                
                // Snacks and Packaged Foods
                { id: 22, name: 'Potato Chips', category: 'Snacks and Packaged Foods', price: 20, stock: 50 },
                { id: 23, name: 'Biscuits', category: 'Snacks and Packaged Foods', price: 35, stock: 40},
                { id: 24, name: 'Instant Noodles', category: 'Snacks and Packaged Foods', price: 15, stock: 60 },
                { id: 25, name: 'Maggi Noodles', category: 'Snacks and Packaged Foods', price: 20, stock: 30},
                { id: 26, name: 'Parle-G Biscuits', category: 'Snacks and Packaged Foods', price: 20, stock: 10},
                
                // Dairy Products
                { id: 27, name: 'Fresh Milk', category: 'Dairy Products', price: 35, stock: 25 },
                { id: 28, name: 'Paneer', category: 'Dairy Products', price: 90, stock: 5 },
                { id: 29, name: 'Yogurt', category: 'Dairy Products', price: 45, stock: 20 },
                { id: 30, name: 'Butter', category: 'Dairy Products', price: 120, stock: 18 },
                { id: 31, name: 'Cheese Slices', category: 'Dairy Products', price: 60, stock: 3 },
                
                // Beverages
                { id: 32, name: 'Tea Powder', category: 'Beverages', price: 180, stock: 35 },
                { id: 33, name: 'Coffee Powder', category: 'Beverages', price: 200, stock: 25},
                { id: 34, name: 'Soft Drink', category: 'Beverages', price: 45, stock: 40},
                { id: 35, name: 'Fruit Juice', category: 'Beverages', price: 65, stock: 30 },
                { id: 36, name: 'Mineral Water', category: 'Beverages', price: 30, stock: 17 }
            ];
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', filterProducts);
            document.getElementById('purchaseSearchInput').addEventListener('input', filterPurchaseProducts);
            document.getElementById('billSearchInput').addEventListener('input', filterBills);
            document.getElementById('productForm').addEventListener('submit', saveProduct);
        }

        // Show section
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Reset category filters
            currentCategoryFilter = 'all';
            currentPurchaseCategoryFilter = 'all';
            resetCategoryButtons();
            
            // Update content based on section
            if (sectionName === 'purchase') {
                renderPurchaseProducts();
            } else if (sectionName === 'bills') {
                renderBills();
            } else if (sectionName === 'products') {
                renderProducts();
            }
        }

        // Reset category buttons
        function resetCategoryButtons() {
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.category-btn')[0].classList.add('active');
        }

        // Filter by category
        function filterByCategory(category) {
            currentCategoryFilter = category;
            
            // Update active button
            document.querySelectorAll('#products .category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderProducts();
        }

        // Filter purchase by category
        function filterPurchaseByCategory(category) {
            currentPurchaseCategoryFilter = category;
            
            // Update active button
            document.querySelectorAll('#purchase .category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderPurchaseProducts();
        }

        // Get category icon
        function getCategoryIcon(category) {
            const icons = {
                'Spices and Masala': 'üå∂Ô∏è',
                'Grains and Staples': 'üåæ',
                'Oils and Ghee': 'üõ¢Ô∏è',
                'Household and Cleaning Items': 'üßΩ',
                'Snacks and Packaged Foods': 'üçø',
                'Dairy Products': 'ü•õ',
                'Beverages': 'ü•§'
            };
            return icons[category] || 'üì¶';
        }

        // Get stock status
        function getStockStatus(stock) {
            if (stock === 0) return { class: 'out-of-stock', text: 'Out of Stock' };
            if (stock <= 10) return { class: 'low-stock', text: 'Low Stock' };
            return { class: 'in-stock', text: 'In Stock' };
        }

        // Show low stock modal
        function showLowStockModal() {
            const lowStockItems = products.filter(product => product.stock <= 10 && product.stock > 0);
            const outOfStockItems = products.filter(product => product.stock === 0);
            
            let content = '<div style="max-height: 400px; overflow-y: auto;">';
            
            if (lowStockItems.length === 0 && outOfStockItems.length === 0) {
                content += '<p style="text-align: center; color: #27ae60; padding: 2rem;">‚úÖ All products are well stocked!</p>';
            } else {
                if (lowStockItems.length > 0) {
                    content += '<h4 style="color: #f39c12; margin-bottom: 1rem;">‚ö†Ô∏è Low Stock Items</h4>';
                    lowStockItems.forEach(item => {
                        content += `
                            <div class="low-stock-item">
                                <div>
                                    <div class="low-stock-item-name">${getCategoryIcon(item.category)} ${item.name}</div>
                                    <div style="font-size: 0.8rem; color: #7f8c8d;">${item.category}</div>
                                </div>
                                <div class="low-stock-item-stock">${item.stock} left</div>
                            </div>
                        `;
                    });
                }
                
                if (outOfStockItems.length > 0) {
                    content += '<h4 style="color: #e74c3c; margin: 1.5rem 0 1rem 0;">‚ùå Out of Stock Items</h4>';
                    outOfStockItems.forEach(item => {
                        content += `
                            <div class="low-stock-item" style="background: #f8d7da; border-left-color: #e74c3c;">
                                <div>
                                    <div class="low-stock-item-name" style="color: #721c24;">${getCategoryIcon(item.category)} ${item.name}</div>
                                    <div style="font-size: 0.8rem; color: #7f8c8d;">${item.category}</div>
                                </div>
                                <div style="color: #e74c3c; font-weight: bold;">Out of Stock</div>
                            </div>
                        `;
                    });
                }
            }
            
            content += '</div>';
            document.getElementById('lowStockContent').innerHTML = content;
            document.getElementById('lowStockModal').classList.add('active');
        }

        // Close low stock modal
        function closeLowStockModal() {
            document.getElementById('lowStockModal').classList.remove('active');
        }

        // Update low stock preview
        function updateLowStockPreview() {
            const lowStockItems = products.filter(product => product.stock <= 10 && product.stock > 0);
            const preview = document.getElementById('lowStockPreview');
            
            if (lowStockItems.length === 0) {
                preview.innerHTML = '';
                return;
            }
            
            let previewContent = '';
            // Show only first 3 items in preview
            const itemsToShow = lowStockItems.slice(0, 3);
            
            itemsToShow.forEach(item => {
                previewContent += `
                    <div class="low-stock-item" style="margin-bottom: 0.3rem; padding: 0.3rem;">
                        <div class="low-stock-item-name" style="font-size: 0.8rem;">${item.name}</div>
                        <div class="low-stock-item-stock" style="font-size: 0.8rem;">${item.stock}</div>
                    </div>
                `;
            });
            
            if (lowStockItems.length > 3) {
                previewContent += `<div style="text-align: center; font-size: 0.8rem; color: #f39c12; margin-top: 0.5rem;">+${lowStockItems.length - 3} more items</div>`;
            }
            
            preview.innerHTML = previewContent;
        }

        // Render products table
        function renderProducts() {
            const tbody = document.getElementById('productTableBody');
            tbody.innerHTML = '';

            let filteredProducts = products;
            if (currentCategoryFilter !== 'all') {
                filteredProducts = products.filter(product => product.category === currentCategoryFilter);
            }

            filteredProducts.forEach(product => {
                const stockStatus = getStockStatus(product.stock);
                const row = `
                    <tr>
                        <td><div class="product-image">${getCategoryIcon(product.category)}</div></td>
                        <td>
                            <div style="font-weight: 600;">${product.name}</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">${product.description || ''}</div>
                        </td>
                        <td>${product.category}</td>
                        <td>‚Çπ${product.price}</td>
                        <td>${product.stock}</td>
                        <td><span class="stock-status ${stockStatus.class}">${stockStatus.text}</span></td>
                        <td>
                            <button class="btn btn-primary btn-sm" onclick="editProduct(${product.id})">Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteProduct(${product.id})">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Render purchase products
        function renderPurchaseProducts() {
            const tbody = document.getElementById('purchaseProductTableBody');
            tbody.innerHTML = '';

            let filteredProducts = products.filter(p => p.stock > 0);
            if (currentPurchaseCategoryFilter !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === currentPurchaseCategoryFilter);
            }

            filteredProducts.forEach(product => {
                const row = `
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div class="product-image">${getCategoryIcon(product.category)}</div>
                                <div>
                                    <div style="font-weight: 600;">${product.name}</div>
                                    <div style="font-size: 0.9rem; color: #7f8c8d;">${product.description || ''}</div>
                                </div>
                            </div>
                        </td>
                        <td>‚Çπ${product.price}</td>
                        <td>${product.stock}</td>
                        <td>
                            <button class="btn btn-success btn-sm" onclick="addToCart(${product.id})">Add to Cart</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Filter products
        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            let filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm)
            );

            if (currentCategoryFilter !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === currentCategoryFilter);
            }
            
            const tbody = document.getElementById('productTableBody');
            tbody.innerHTML = '';
            
            filteredProducts.forEach(product => {
                const stockStatus = getStockStatus(product.stock);
                const row = `
                    <tr>
                        <td><div class="product-image">${getCategoryIcon(product.category)}</div></td>
                        <td>
                            <div style="font-weight: 600;">${product.name}</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">${product.description || ''}</div>
                        </td>
                        <td>${product.category}</td>
                        <td>‚Çπ${product.price}</td>
                        <td>${product.stock}</td>
                        <td><span class="stock-status ${stockStatus.class}">${stockStatus.text}</span></td>
                        <td>
                            <button class="btn btn-primary btn-sm" onclick="editProduct(${product.id})">Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteProduct(${product.id})">Delete</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Filter purchase products
        function filterPurchaseProducts() {
            const searchTerm = document.getElementById('purchaseSearchInput').value.toLowerCase();
            let filteredProducts = products.filter(product => 
                product.stock > 0 && (
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                )
            );

            if (currentPurchaseCategoryFilter !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === currentPurchaseCategoryFilter);
            }
            
            const tbody = document.getElementById('purchaseProductTableBody');
            tbody.innerHTML = '';
            
            filteredProducts.forEach(product => {
                const row = `
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div class="product-image">${getCategoryIcon(product.category)}</div>
                                <div>
                                    <div style="font-weight: 600;">${product.name}</div>
                                    <div style="font-size: 0.9rem; color: #7f8c8d;">${product.description || ''}</div>
                                </div>
                            </div>
                        </td>
                        <td>‚Çπ${product.price}</td>
                        <td>${product.stock}</td>
                        <td>
                            <button class="btn btn-success btn-sm" onclick="addToCart(${product.id})">Add to Cart</button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Open add product modal
        function openAddProductModal() {
            editingProductId = null;
            document.getElementById('modalTitle').textContent = 'Add Product';
            document.getElementById('productForm').reset();
            document.getElementById('productModal').classList.add('active');
        }

        // Close product modal
        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
        }

        // Edit product
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                editingProductId = id;
                document.getElementById('modalTitle').textContent = 'Edit Product';
                document.getElementById('productName').value = product.name;
                document.getElementById('productCategory').value = product.category;
                document.getElementById('productPrice').value = product.price;
                document.getElementById('productStock').value = product.stock;
                document.getElementById('productDescription').value = product.description || '';
                document.getElementById('productModal').classList.add('active');
            }
        }

        // Save product
        function saveProduct(e) {
            e.preventDefault();
            
            const productData = {
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                price: parseFloat(document.getElementById('productPrice').value),
                stock: parseInt(document.getElementById('productStock').value),
                description: document.getElementById('productDescription').value
            };

            if (editingProductId) {
                // Update existing product
                const index = products.findIndex(p => p.id === editingProductId);
                products[index] = { ...products[index], ...productData };
            } else {
                // Add new product
                const newId = Math.max(...products.map(p => p.id)) + 1;
                products.push({ id: newId, ...productData });
            }

            renderProducts();
            renderPurchaseProducts();
            updateStats();
            closeProductModal();
            
            // Show success message
            alert(editingProductId ? 'Product updated successfully!' : 'Product added successfully!');
        }

        // Delete product
        function deleteProduct(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== id);
                renderProducts();
                renderPurchaseProducts();
                updateStats();
                alert('Product deleted successfully!');
            }
        }

        // Add to cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product && product.stock > 0) {
                const existingItem = cart.find(item => item.id === productId);
                
                if (existingItem) {
                    if (existingItem.quantity < product.stock) {
                        existingItem.quantity++;
                    } else {
                        alert('Cannot add more items. Stock limit reached!');
                        return;
                    }
                } else {
                    cart.push({
                        id: productId,
                        name: product.name,
                        price: product.price,
                        quantity: 1,
                        category: product.category
                    });
                }
                
                renderCart();
                updateGenerateBillButton();
            }
        }

        // Remove from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            renderCart();
            updateGenerateBillButton();
        }

        // Update quantity in cart
        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (item && product) {
                const newQuantity = item.quantity + change;
                
                if (newQuantity <= 0) {
                    removeFromCart(productId);
                } else if (newQuantity <= product.stock) {
                    item.quantity = newQuantity;
                    renderCart();
                } else {
                    alert('Cannot add more items. Stock limit reached!');
                }
            }
        }

        // Render cart
        function renderCart() {
            const cartContainer = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartContainer.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 2rem;">Cart is empty</p>';
                cartTotal.style.display = 'none';
                return;
            }

            let total = 0;
            cartContainer.innerHTML = '';
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${getCategoryIcon(item.category)} ${item.name}</div>
                            <div class="cart-item-price">‚Çπ${item.price} each</div>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="updateCartQuantity(${item.id}, -1)">-</button>
                            <span class="quantity-display">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateCartQuantity(${item.id}, 1)">+</button>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 600;">‚Çπ${itemTotal}</div>
                            <button class="btn btn-danger btn-sm" onclick="removeFromCart(${item.id})" style="margin-top: 0.5rem;">Remove</button>
                        </div>
                    </div>
                `;
                cartContainer.innerHTML += cartItem;
            });

            document.getElementById('cartTotalAmount').textContent = `‚Çπ${total}`;
            cartTotal.style.display = 'block';
        }

        // Update generate bill button
        function updateGenerateBillButton() {
            const btn = document.getElementById('generateBillBtn');
            btn.textContent = `Generate Bill (${cart.length})`;
            btn.disabled = cart.length === 0;
        }

        // Generate bill
        function generateBill() {
            if (cart.length === 0) {
                alert('Cart is empty!');
                return;
            }

            const billId = 'BILL-' + Date.now();
            const billDate = new Date().toLocaleString();
            let total = 0;
            
            const billItems = cart.map(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                // Update product stock
                const product = products.find(p => p.id === item.id);
                if (product) {
                    product.stock -= item.quantity;
                }
                
                return {
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity,
                    total: itemTotal,
                    category: item.category
                };
            });

            const bill = {
                id: billId,
                date: billDate,
                items: billItems,
                total: total
            };

            bills.push(bill);
            
            // Show bill
            showBill(bill);
            
            // Clear cart
            cart = [];
            renderCart();
            updateGenerateBillButton();
            
            // Update displays
            renderProducts();
            renderPurchaseProducts();
            updateStats();
        }

        // Show bill
        function showBill(bill) {
            const billContent = `
                <div class="bill-container">
                    <div class="bill-header">
                        <h2 style="color: #2c3e50; margin-bottom: 0.5rem;">InventroHub</h2>
                        <p style="color: #7f8c8d;">Grocery Store Management</p>
                        <div style="margin-top: 1rem;">
                            <strong>Bill ID:</strong> ${bill.id}<br>
                            <strong>Date:</strong> ${bill.date}
                        </div>
                    </div>
                    <div>
                        ${bill.items.map(item => `
                            <div class="bill-item">
                                <div>
                                    <div style="font-weight: 600;">${getCategoryIcon(item.category)} ${item.name}</div>
                                    <div style="font-size: 0.9rem; color: #7f8c8d;">‚Çπ${item.price} √ó ${item.quantity}</div>
                                </div>
                                <div style="font-weight: 600;">‚Çπ${item.total}</div>
                            </div>
                        `).join('')}
                        <div class="bill-total">
                            <span>Total Amount:</span>
                            <span>‚Çπ${bill.total}</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('billContent').innerHTML = billContent;
            document.getElementById('billModal').classList.add('active');
        }

        // Close bill modal
        function closeBillModal() {
            document.getElementById('billModal').classList.remove('active');
        }

        // Print bill
        function printBill() {
            const billContent = document.getElementById('billContent').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Print Bill</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .bill-container { max-width: 400px; margin: 0 auto; }
                            .bill-header { text-align: center; margin-bottom: 2rem; border-bottom: 2px solid #ccc; padding-bottom: 1rem; }
                            .bill-item { display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #eee; }
                            .bill-total { display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem; margin-top: 1rem; padding-top: 1rem; border-top: 2px solid #ccc; }
                        </style>
                    </head>
                    <body>${billContent}</body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Render bills
        function renderBills() {
            const billsList = document.getElementById('billsList');
            
            if (bills.length === 0) {
                billsList.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 2rem;">No bills generated yet</p>';
                return;
            }

            billsList.innerHTML = '';
            
            bills.slice().reverse().forEach(bill => {
                const billCard = `
                    <div class="cart-item" style="margin-bottom: 1rem;">
                        <div class="cart-item-info">
                            <div class="cart-item-name">Bill ID: ${bill.id}</div>
                            <div class="cart-item-price">${bill.date}</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">${bill.items.length} items</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 600; font-size: 1.2rem;">‚Çπ${bill.total}</div>
                            <button class="btn btn-primary btn-sm" onclick="showBillDetails('${bill.id}')" style="margin-top: 0.5rem;">View Details</button>
                        </div>
                    </div>
                `;
                billsList.innerHTML += billCard;
            });
        }

        // Show bill details
        function showBillDetails(billId) {
            const bill = bills.find(b => b.id === billId);
            if (bill) {
                showBill(bill);
            }
        }

        // Filter bills
        function filterBills() {
            const searchTerm = document.getElementById('billSearchInput').value.toLowerCase();
            const filteredBills = bills.filter(bill => 
                bill.id.toLowerCase().includes(searchTerm) ||
                bill.date.toLowerCase().includes(searchTerm)
            );
            
            const billsList = document.getElementById('billsList');
            
            if (filteredBills.length === 0) {
                billsList.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 2rem;">No bills found</p>';
                return;
            }

            billsList.innerHTML = '';
            
            filteredBills.slice().reverse().forEach(bill => {
                const billCard = `
                    <div class="cart-item" style="margin-bottom: 1rem;">
                        <div class="cart-item-info">
                            <div class="cart-item-name">Bill ID: ${bill.id}</div>
                            <div class="cart-item-price">${bill.date}</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">${bill.items.length} items</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: 600; font-size: 1.2rem;">‚Çπ${bill.total}</div>
                            <button class="btn btn-primary btn-sm" onclick="showBillDetails('${bill.id}')" style="margin-top: 0.5rem;">View Details</button>
                        </div>
                    </div>
                `;
                billsList.innerHTML += billCard;
            });
        }

        // Update stats
        function updateStats() {
            const totalProducts = products.length;
            const totalValue = products.reduce((sum, product) => sum + (product.price * product.stock), 0);
            const lowStockItems = products.filter(product => product.stock <= 10).length;
            const todaySales = bills.reduce((sum, bill) => {
                const today = new Date().toDateString();
                const billDate = new Date(bill.date).toDateString();
                return billDate === today ? sum + bill.total : sum;
            }, 0);

            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalValue').textContent = `‚Çπ${totalValue.toLocaleString()}`;
            document.getElementById('lowStockItems').textContent = lowStockItems;
            document.getElementById('todaySales').textContent = `‚Çπ${todaySales.toLocaleString()}`;
            
            // Update low stock preview
            updateLowStockPreview();
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });
    </script>
</body>
</html>
